---
apiVersion: v1
kind: Pod
metadata:
  name: busybox
  labels:
    appname: busybox
spec:
  securityContext:
    runAsNonRoot: true
    seccompProfile:
      type: RuntimeDefault
  containers:
    - name: busybox
      image: quay.io/vcppds7878/busybox:latest 
      imagePullPolicy: IfNotPresent
      command: ['sh', '-c', 'while true; do echo $(date) | tee -a /mnt/test/outfile; sync; sleep 1; done']
      securityContext:
        allowPrivilegeEscalation: false
        capabilities:
          drop:
          - ALL
      volumeMounts:
        - name: mypvc
          mountPath: /mnt/test
  volumes:
    - name: mypvc
      persistentVolumeClaim:
        claimName: busybox-pvc
        readOnly: false
